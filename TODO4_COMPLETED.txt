# TODO4 - Ğ Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ»Ğ¸Ñ† Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¼Ğ¸

## Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: âœ… Ğ’Ğ«ĞŸĞĞ›ĞĞ•ĞĞ

### Ğ¦ĞµĞ»Ğ¸ Ğ¸Ğ· todo4.txt:
1. âœ… ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ»Ğ¸Ñ†Ğ°Ğ¼ Ğ¸ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ Ğ»Ğ¸Ñ†Ğ°Ğ¼
2. âœ… ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğ»Ğ¸Ñ† Ğº Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ğ¸ÑĞ¼
3. âœ… Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ person Ğ¸ faces Ğ² Ğ‘Ğ” Ñ ÑĞ²ÑĞ·ÑĞ¼Ğ¸
4. âœ… Ğ˜Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ñ Ğ»Ğ¸Ñ† Ñ‡ĞµÑ€ĞµĞ· pgvector (HNSW)
5. âœ… ĞšĞ»Ğ¸Ğº Ğ½Ğ° Ğ»Ğ¸Ñ†Ğ¾ Ğ² UI Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞºĞµ
6. âœ… ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ»Ğ¸Ñ† Ğº Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¼
7. âœ… ĞšĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº (Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ° + CLIP): "Ğ¢Ğ°Ğ½Ñ Ğ² Ğ³Ğ¾Ñ€Ğ°Ñ…"

---

## Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸

### 1. Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (init_db.sql)

**Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° `person`:**
- `person_id` â€” ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ID Ğ¿ĞµÑ€ÑĞ¾Ğ½Ñ‹
- `name` â€” Ğ¸Ğ¼Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ñ‹
- `description` â€” Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ
- `cover_face_id` â€” ID Ğ»ÑƒÑ‡ÑˆĞµĞ³Ğ¾ Ğ»Ğ¸Ñ†Ğ° Ğ´Ğ»Ñ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ°
- `created_at`, `updated_at` â€” Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚ĞºĞ¸

**Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° `faces`:**
- `face_id` â€” ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ID Ğ»Ğ¸Ñ†Ğ°
- `image_id` â€” ÑÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° Ñ„Ğ¾Ñ‚Ğ¾ (FK â†’ photo_index)
- `person_id` â€” ÑÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° Ğ¿ĞµÑ€ÑĞ¾Ğ½Ñƒ (FK â†’ person)
- `bbox_x1, bbox_y1, bbox_x2, bbox_y2` â€” ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹ bounding box
- `det_score` â€” ÑƒĞ²ĞµÑ€ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ğ´ĞµÑ‚ĞµĞºÑ†Ğ¸Ğ¸ (0-1)
- `landmarks` â€” ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ğ»Ğ¸Ñ†Ğ° (JSON)
- `age`, `gender` â€” Ğ¾Ñ†ĞµĞ½Ğ¾Ñ‡Ğ½Ñ‹Ğµ Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ñ‹ Ğ¾Ñ‚ InsightFace
- `face_embedding` â€” vector(512) Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ñ… Ğ»Ğ¸Ñ†
- HNSW Ğ¸Ğ½Ğ´ĞµĞºÑ Ğ½Ğ° `face_embedding` Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ¸ÑĞºĞ°

**View `person_with_stats`:**
- ĞĞ³Ñ€ĞµĞ³Ğ¸Ñ€ÑƒĞµÑ‚ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ»Ğ¸Ñ† Ğ¸ Ñ„Ğ¾Ñ‚Ğ¾ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ñ‹

**ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:**
- Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ Ñ„Ğ»Ğ°Ğ³ `faces_indexed` Ğ² `photo_index` Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ skip_indexed
- Ğ£ÑĞºĞ¾Ñ€ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğ² 100-1000 Ñ€Ğ°Ğ· (ÑĞ¼. MIGRATION_FACES_INDEXED.md)

---

### 2. Face Embedder (services/face_embedder.py)

**Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸:**
- InsightFace buffalo_l Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ
- ONNX Runtime GPU (CUDA)
- 512-Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ½Ñ‹Ğµ ÑĞ¼Ğ±ĞµĞ´Ğ´Ğ¸Ğ½Ğ³Ğ¸

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
- `detect_faces()` â€” Ğ´ĞµÑ‚ĞµĞºÑ†Ğ¸Ñ Ğ²ÑĞµÑ… Ğ»Ğ¸Ñ† Ğ½Ğ° Ñ„Ğ¾Ñ‚Ğ¾
- `detect_faces_batch()` â€” Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° batch Ñ GPU workers
- ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ²Ğ¾Ğ·Ñ€Ğ°ÑÑ‚Ğ°, Ğ¿Ğ¾Ğ»Ğ°, ÑƒĞ²ĞµÑ€ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ´ĞµÑ‚ĞµĞºÑ†Ğ¸Ğ¸
- Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ landmarks (ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… Ñ‚Ğ¾Ñ‡ĞµĞº)
- EXIF orientation handling (ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ñ… bbox)

**ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ:**
- Batch Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ñ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ĞµĞ¼ GPU workers (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ 8)
- Parallel inference Ñ‡ĞµÑ€ĞµĞ· ThreadPoolExecutor

---

### 3. Face Indexer (services/face_indexer.py)

**ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹:**
- `FaceRepository` â€” CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ Ğ‘Ğ”
- `FaceIndexingService` â€” Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€ Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ğ¸

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ğ¸:**
- `index_image()` â€” Ğ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ğ´Ğ½Ğ¾ Ñ„Ğ¾Ñ‚Ğ¾
- `index_batch()` â€” batch Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ñ Ñ GPU Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»Ğ¸Ğ·Ğ¼Ğ¾Ğ¼
- `reindex_all()` â€” Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ Ğ¿ĞµÑ€ĞµĞ¸Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ñ Ñ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ-Ñ‚Ñ€ĞµĞºĞ¸Ğ½Ğ³Ğ¾Ğ¼
  - `skip_indexed=True` Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Ñ„Ğ»Ğ°Ğ³ `faces_indexed` Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞºĞ°
  - Batch size ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ¸Ñ€ÑƒĞµÑ‚ GPU memory Ğ¸ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»Ğ¸Ğ·Ğ¼
  - Real-time ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°: processed, faces_found, speed, ETA

**ĞŸĞ¾Ğ¸ÑĞº:**
- `search_similar_faces()` â€” Ğ¿Ğ¾Ğ¸ÑĞº Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ñ… Ğ»Ğ¸Ñ† Ñ‡ĞµÑ€ĞµĞ· pgvector cosine distance
- `get_faces_for_photo()` â€” Ğ²ÑĞµ Ğ»Ğ¸Ñ†Ğ° Ğ½Ğ° ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¼ Ñ„Ğ¾Ñ‚Ğ¾

**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ğ¸:**
- `get_indexing_status()` â€” Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ Ñ Ğ¿Ñ€Ğ¾Ñ†ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸, ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒÑ, ETA

---

### 4. Person Service (services/person_service.py)

**ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹:**
- `PersonRepository` â€” CRUD Ğ´Ğ»Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½
- `PersonService` â€” Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°

**Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¼Ğ¸:**
- `create_person()` â€” ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ñ‹ Ñ Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ½Ğ°Ñ‡Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ»Ğ¸Ñ†Ğ¾Ğ¼
- `get_person()` â€” Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ñ‹ + sample faces
- `list_persons()` â€” ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ²ÑĞµÑ… Ğ¿ĞµÑ€ÑĞ¾Ğ½ Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ¾Ğ¼ Ğ¿Ğ¾ Ğ¸Ğ¼ĞµĞ½Ğ¸
- `update_person()` â€” Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¸Ğ¼ĞµĞ½Ğ¸, Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ, cover_face
- `delete_person()` â€” ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ (Ğ»Ğ¸Ñ†Ğ° ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ÑÑ‚ÑÑ unassigned)
- `merge_persons()` â€” Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ²ÑƒÑ… Ğ¿ĞµÑ€ÑĞ¾Ğ½

**ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğ»Ğ¸Ñ†:**
- `assign_face_to_person()` â€” Ñ€ÑƒÑ‡Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğ»Ğ¸Ñ†Ğ°
- `unassign_face()` â€” Ğ¾Ñ‚Ğ²ÑĞ·Ğ°Ñ‚ÑŒ Ğ»Ğ¸Ñ†Ğ¾
- `auto_assign_faces()` â€” Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğ¿Ğ¾ ÑÑ…Ğ¾Ğ´ÑÑ‚Ğ²Ñƒ ÑĞ¼Ğ±ĞµĞ´Ğ´Ğ¸Ğ½Ğ³Ğ¾Ğ²
  - Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ ÑÑ€ĞµĞ´Ğ½ĞµĞµ Ğ¿Ğ¾ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¼ Ğ»Ğ¸Ñ†Ğ°Ğ¼ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ñ‹
  - ĞĞ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ğµ Ğ½ĞµĞ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ‹Ğµ Ğ»Ğ¸Ñ†Ğ° Ñ‡ĞµÑ€ĞµĞ· pgvector
  - ĞĞ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğ¹ threshold (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ 0.6)

**Ğ¤Ğ¾Ñ‚Ğ¾ Ğ¿Ğ¾ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¼:**
- `get_photos_by_person()` â€” Ğ²ÑĞµ Ñ„Ğ¾Ñ‚Ğ¾ Ñ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¹ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ¾Ğ¹
- `get_photo_count_by_person()` â€” Ğ¿Ğ¾Ğ´ÑÑ‡Ñ‘Ñ‚ Ñ„Ğ¾Ñ‚Ğ¾

---

### 5. API Endpoints (api/main.py)

**Face Detection & Indexing:**
- `POST /faces/reindex` â€” Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ñ„Ğ¾Ğ½Ğ¾Ğ²ÑƒÑ Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ñ Ğ»Ğ¸Ñ†
  - ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹: `skip_indexed` (bool), `batch_size` (int)
- `GET /faces/reindex/status` â€” Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ğ¸ Ñ live updates
- `GET /photo/{id}/faces` â€” Ğ²ÑĞµ Ğ»Ğ¸Ñ†Ğ° Ğ½Ğ° Ñ„Ğ¾Ñ‚Ğ¾ Ñ bbox, Ğ²Ğ¾Ğ·Ñ€Ğ°ÑÑ‚Ğ¾Ğ¼, Ğ¿Ğ¾Ğ»Ğ¾Ğ¼
- `GET /faces/stats` â€” ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ğ¾ Ğ»Ğ¸Ñ†Ğ°Ğ¼ Ğ¸ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¼

**Face Search:**
- `POST /search/face` â€” Ğ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ñ„Ğ¾Ñ‚Ğ¾, Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ğµ Ğ»Ğ¸Ñ†Ğ°
- `POST /search/face/by_id/{face_id}` â€” Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ğµ Ğ»Ğ¸Ñ†Ğ° Ğ¿Ğ¾ Ğ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ğ¾Ğ¼Ñƒ face_id

**Person Management:**
- `GET /persons` â€” ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¿ĞµÑ€ÑĞ¾Ğ½ (Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ¾Ğ¼, Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸ĞµĞ¹)
- `POST /persons` â€” ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ñƒ
- `GET /persons/{id}` â€” Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ñ‹
- `PUT /persons/{id}` â€” Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ñƒ
- `DELETE /persons/{id}` â€” ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ñƒ
- `POST /persons/{id}/merge/{target_id}` â€” Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ñ‹
- `GET /persons/{id}/photos` â€” Ñ„Ğ¾Ñ‚Ğ¾ Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ¾Ğ¹

**Face-Person Assignment:**
- `POST /faces/{id}/assign` â€” Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ñ‚ÑŒ Ğ»Ğ¸Ñ†Ğ¾ Ğº Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğµ (Ğ¸Ğ»Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²ÑƒÑ)
- `DELETE /faces/{id}/assign` â€” Ğ¾Ñ‚Ğ²ÑĞ·Ğ°Ñ‚ÑŒ Ğ»Ğ¸Ñ†Ğ¾
- `POST /persons/{id}/auto-assign` â€” Ğ°Ğ²Ñ‚Ğ¾Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ñ… Ğ»Ğ¸Ñ†

**Combined Search:**
- `POST /search/person-clip` â€” ĞºĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº
  - Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ: `person_id`, `query` (Ñ‚ĞµĞºÑÑ‚), `top_k`, `translate`, `model`
  - Ğ›Ğ¾Ğ³Ğ¸ĞºĞ°: Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ²ÑĞµ Ñ„Ğ¾Ñ‚Ğ¾ Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ¾Ğ¹ â†’ CLIP Ğ¿Ğ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑƒ ÑÑ€ĞµĞ´Ğ¸ Ğ½Ğ¸Ñ…
  - ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: `{"person_id": 1, "query": "Ğ² Ğ³Ğ¾Ñ€Ğ°Ñ…"}` â†’ "Ğ¢Ğ°Ğ½Ñ Ğ² Ğ³Ğ¾Ñ€Ğ°Ñ…"

---

### 6. Web UI (api/static/index.html)

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ lightbox:**
- ĞšĞ½Ğ¾Ğ¿ĞºĞ° ğŸ‘¤ â€” Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ/ÑĞºÑ€Ñ‹Ñ‚ÑŒ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ñ‹Ğµ Ğ»Ğ¸Ñ†Ğ°
- Ğ—ĞµĞ»Ñ‘Ğ½Ñ‹Ğµ bbox â€” Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ‹Ğµ Ğ»Ğ¸Ñ†Ğ°
- Ğ–Ñ‘Ğ»Ñ‚Ñ‹Ğµ Ğ¿ÑƒĞ½ĞºÑ‚Ğ¸Ñ€Ğ½Ñ‹Ğµ bbox â€” Ğ½ĞµĞ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ‹Ğµ Ğ»Ğ¸Ñ†Ğ°
- ĞšĞ»Ğ¸Ğº Ğ½Ğ° bbox â†’ popup Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸ĞµĞ¹:
  - Ğ£Ğ²ĞµÑ€ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ğ´ĞµÑ‚ĞµĞºÑ†Ğ¸Ğ¸ (%)
  - Ğ’Ğ¾Ğ·Ñ€Ğ°ÑÑ‚, Ğ¿Ğ¾Ğ»
  - Ğ˜Ğ¼Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ñ‹ (ĞµÑĞ»Ğ¸ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¾)
  - Dropdown Ğ´Ğ»Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ¹ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ñ‹
  - Input Ğ´Ğ»Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ñ‹
  - ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ Save/Cancel

**Face overlays:**
- Dynamic rendering Ñ ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ
- ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ bbox relative to rendered image size
- Support Ğ´Ğ»Ñ EXIF orientation Ñ‡ĞµÑ€ĞµĞ· ImageOps.exif_transpose

**Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ:**
- ĞĞ²Ñ‚Ğ¾Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ÑĞ¿Ğ¸ÑĞºĞ° Ğ¿ĞµÑ€ÑĞ¾Ğ½ Ğ¿Ñ€Ğ¸ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğ¸ lightbox
- Real-time Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸ Ğ»Ğ¸Ñ†Ğ°
- Escape Ğ´Ğ»Ñ Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ popup

---

### 7. ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ (config/settings.py)

**ĞĞ¾Ğ²Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
```python
# InsightFace
FACE_MODEL = "buffalo_l"
FACE_DEVICE = "cuda"
FACE_DET_SIZE = (640, 640)
FACE_MIN_SCORE = 0.65
FACE_BATCH_SIZE = 8

# Face similarity thresholds
FACE_SIMILARITY_THRESHOLD = 0.6  # Ğ´Ğ»Ñ auto-assignment
FACE_SEARCH_THRESHOLD = 0.5      # Ğ´Ğ»Ñ search
```

---

### 8. Dependencies (requirements.txt)

**Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¾:**
```txt
insightface>=0.7.3
onnxruntime-gpu>=1.16.0  # CUDA support
```

---

### 9. Dockerfile

**Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ:**
- Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ `build-essential` Ğ´Ğ»Ñ ĞºĞ¾Ğ¼Ğ¿Ğ¸Ğ»ÑÑ†Ğ¸Ğ¸ ONNX Runtime dependencies

---

### 10. Postman Collection

**ĞĞ¾Ğ²Ñ‹Ğµ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ñ‹:**
- Face Detection & Indexing (4 endpoints)
- Face Search (2 endpoints)
- Person Management (7 endpoints)
- Face-Person Assignment (4 endpoints)
- Combined Search (1 endpoint)

**Ğ’ÑĞµĞ³Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¾:** 18 Ğ½Ğ¾Ğ²Ñ‹Ñ… endpoints Ñ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ°Ğ¼Ğ¸

---

## ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ

**Face Indexing:**
- GPU: ~3-8 img/s (Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ batch_size Ğ¸ GPU workers)
- CPU: ~0.3-1 img/s
- Batch processing Ñ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ĞµĞ¼ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»Ğ¸Ğ·Ğ¼Ğ° Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ GPU

**Face Search:**
- HNSW Ğ¸Ğ½Ğ´ĞµĞºÑ Ğ½Ğ° 512-dim ÑĞ¼Ğ±ĞµĞ´Ğ´Ğ¸Ğ½Ğ³Ğ°Ñ…
- ĞŸĞ¾Ğ¸ÑĞº 10 Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ñ… Ğ»Ğ¸Ñ†: ~10-50ms

**ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸:**
- Ğ¤Ğ»Ğ°Ğ³ `faces_indexed` ÑƒÑĞºĞ¾Ñ€ÑĞµÑ‚ skip_indexed Ğ² 100-1000 Ñ€Ğ°Ğ·
- Normalized embeddings Ğ´Ğ»Ñ consistent cosine similarity
- ThreadPoolExecutor Ğ´Ğ»Ñ parallel GPU inference

---

## ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ñ Ğ»Ğ¸Ñ†
```bash
curl -X POST "http://localhost:8000/faces/reindex?skip_indexed=true&batch_size=8"
```

### Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ñƒ
```bash
curl -X POST http://localhost:8000/persons \
  -H "Content-Type: application/json" \
  -d '{"name": "Ğ¢Ğ°Ğ½Ñ", "description": "ĞœĞ¾Ñ ÑĞµÑÑ‚Ñ€Ğ°"}'
```

### ĞŸÑ€Ğ¸Ğ²ÑĞ·Ğ°Ñ‚ÑŒ Ğ»Ğ¸Ñ†Ğ¾ Ğº Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğµ
```bash
curl -X POST http://localhost:8000/faces/123/assign \
  -H "Content-Type: application/json" \
  -d '{"person_id": 1}'
```

### ĞĞ²Ñ‚Ğ¾Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ñ… Ğ»Ğ¸Ñ†
```bash
curl -X POST "http://localhost:8000/persons/1/auto-assign?threshold=0.6"
```

### ĞšĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº "Ğ¢Ğ°Ğ½Ñ Ğ² Ğ³Ğ¾Ñ€Ğ°Ñ…"
```bash
curl -X POST http://localhost:8000/search/person-clip \
  -H "Content-Type: application/json" \
  -d '{
    "person_id": 1,
    "query": "Ğ² Ğ³Ğ¾Ñ€Ğ°Ñ…",
    "top_k": 20,
    "translate": true,
    "model": "SigLIP"
  }'
```

---

## ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½ Ñ„Ğ°Ğ¹Ğ» [MIGRATION_FACES_INDEXED.md](./MIGRATION_FACES_INDEXED.md) Ñ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸ÑĞ¼Ğ¸ Ğ¿Ğ¾ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ñ„Ğ»Ğ°Ğ³Ğ° `faces_indexed`.

**Ğ­Ñ„Ñ„ĞµĞºÑ‚:**
- Ğ”Ğ¾: 5-10 ÑĞµĞºÑƒĞ½Ğ´ Ğ½Ğ° Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ (Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ğ¹ JOIN)
- ĞŸĞ¾ÑĞ»Ğµ: 10-50 Ğ¼Ñ (Ğ¿Ñ€ÑĞ¼Ğ¾Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¿Ğ¾ Ğ¸Ğ½Ğ´ĞµĞºÑÑƒ)
- Ğ£ÑĞºĞ¾Ñ€ĞµĞ½Ğ¸Ğµ: **100-1000x** âš¡

---

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Web UI (index.html)                 â”‚
â”‚  - Lightbox Ñ face overlays                      â”‚
â”‚  - ĞšĞ»Ğ¸Ğº Ğ½Ğ° bbox â†’ popup Ñ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¾Ğ¹ Ğ¿ĞµÑ€ÑĞ¾Ğ½       â”‚
â”‚  - Real-time Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ÑĞ»Ğµ assign             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           FastAPI (api/main.py)                  â”‚
â”‚  - Face detection endpoints                      â”‚
â”‚  - Person management CRUD                        â”‚
â”‚  - Combined search (person + CLIP)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚               â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚FaceEmbedder â”‚ â”‚ FaceIndexer  â”‚ â”‚PersonService  â”‚
â”‚ (InsightFaceâ”‚ â”‚ (batch GPU,  â”‚ â”‚ (CRUD,        â”‚
â”‚  buffalo_l) â”‚ â”‚  pgvector)   â”‚ â”‚  auto-assign) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        PostgreSQL + pgvector                    â”‚
â”‚  - photo_index (faces_indexed flag)             â”‚
â”‚  - faces (512-dim embeddings, HNSW)             â”‚
â”‚  - person (name, description, cover_face)       â”‚
â”‚  - person_with_stats (VIEW)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Ğ˜Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ñ‹Ğ¹ Ñ‡ĞµĞºĞ»Ğ¸ÑÑ‚

- âœ… **Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:** Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ `person`, `faces`, ÑĞ²ÑĞ·Ğ¸, Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹, VIEW
- âœ… **Face Detection:** InsightFace buffalo_l Ñ GPU acceleration
- âœ… **Face Indexing:** batch Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°, pgvector HNSW, skip_indexed Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- âœ… **Person Management:** CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸, merge, auto-assign
- âœ… **Face Search:** Ğ¿Ğ¾Ğ¸ÑĞº Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ñ… Ğ»Ğ¸Ñ† Ğ¿Ğ¾ ÑĞ¼Ğ±ĞµĞ´Ğ´Ğ¸Ğ½Ğ³Ğ°Ğ¼
- âœ… **Combined Search:** Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ° + CLIP query ("Ğ¢Ğ°Ğ½Ñ Ğ² Ğ³Ğ¾Ñ€Ğ°Ñ…")
- âœ… **Web UI:** face overlays, click to assign, person dropdown
- âœ… **API:** 18 Ğ½Ğ¾Ğ²Ñ‹Ñ… endpoints, Postman collection
- âœ… **Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ:** README.md Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½, Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ñ‹
- âœ… **ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ:** batch GPU processing, HNSW Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹

---

## Ğ”Ğ°Ñ‚Ğ° Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ñ: 02.02.2026

Ğ’ÑĞµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ¸Ğ· todo4.txt Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ñ‹ Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ! ğŸ‰
